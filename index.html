<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="logo-header-con"> 
            <img src="./assets/odin-lined.png" alt="TOP logo">  
            <h1> Odin </h1>
        </div>
        <span class="img-attribution"> Photo by <a href="https://unsplash.com/@haliewestphoto">Halie West</a> on <a href="https://unsplash.com/photos/25xggax4bSA">Unsplash</a></span>
    </header>
    <main>
        <article class="preface">
            <p>This is not a real online service! You know you need something like this in your life to realize your deepest dreams. Sign up <em>now</em> to get started.</p>
            <p>You <em>know</em> you want to.</p>
            <p>Let's do this!</p>
        </article>
        <form class="reg-form" action="">
            <label class="fn-con">
                First Name
                <input type="text" required>
            </label>
            <label class="ln-con">
                Last Name
                <input type="text" required>
            </label>
            <label class="email-con">
                Email
                <input type="email" required>
            </label>
            <label class="phone-con">
                Phone Number
                <input type="text" required>
            </label>
            <label class="pw-con">
                Password
                <input type="password" required>
            </label>
            <label class="cpw-con">
                Confirm Password
                <input type="password" required>
            </label>
            <div class="button-con">
                <button type="submit"> Create Account </button>
            </div>
        </form>
        <p class="login">
            Already have an account? 
            <a href=""> Log in </a>
        </p>
    </main>
    <script>
        const pw1 = document.querySelector(".pw-con input");
        const pw2 = document.querySelector(".cpw-con input");

        document.querySelectorAll("input").forEach(control => {
            control.addEventListener("keyup", activateValidation)
        })

        function activateValidation(e){
            if(e.target === pw1 || e.target == pw2){
                pw1.removeEventListener("keyup", activateValidation);
                pw2.removeEventListener("keyup", activateValidation);
                pw1.addEventListener("keyup", matchPasswords);
                pw2.addEventListener("keyup", matchPasswords);
                pw1.classList.add("validate-on");
                pw2.classList.add("validate-on");
                matchPasswords();
            } else {
                e.target.removeEventListener("keyup", activateValidation); // so this func runs only once for each control
                e.target.classList.add("validate-on");
            } 
        }
        
        function matchPasswords(){
            if(pw1.value !== pw2.value){
                pw1.setCustomValidity("error");
                pw2.setCustomValidity("error");
                pw1.parentElement.classList.add("show-error")
            } else {
                pw1.setCustomValidity("");
                pw2.setCustomValidity("");
                pw1.parentElement.classList.remove("show-error")
            }
            pw1.checkValidity();
            pw2.checkValidity();
        }
    </script>
</body>
</html> 